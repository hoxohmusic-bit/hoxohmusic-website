<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Music Production Service – HOXOH MUSIC</title>
  <meta name="description" content="Professional music production by HOXOH. Bring your sound to life at an unbeatable price.">
  
  <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
  <link rel="icon" href="assets/favicon/favicon.ico?v=3" sizes="any"> 
  <link rel="stylesheet" href="style.css" /> 
  
  <style>
    :root {
      --bg: #0a0d10;
      --panel: #121416;
      --panel-2: #181b1f;
      --line: #232830;
      --text: #eef3f6;
      --muted: #a7b0b8;
      --accent: #19c37d;
      --shadow: 0 16px 46px rgba(0,0,0,.55);
      --radius: 20px;
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; }
    body {
      background: #0a0a0a;
      color: var(--text);
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif;
      position: relative;
      min-height: 100vh;
      overflow-x: hidden;
    }
    body::before {
      content:'';
      position: fixed;
      inset: 0;
      background-image: url('assets/logo/hoxoh-backround-logo.webp');
      background-size: cover;
      background-position: right center;
      background-repeat: no-repeat;
      opacity: 1;
      pointer-events: none;
      z-index: 0;
    }
    #smokeCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      opacity: 0.5;
    }
    #musicNotesCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 2;
      opacity: 0.6;
    }
    a { color: inherit; text-decoration: none; }
    img { display: block; max-width: 100%; }
    .container { max-width: 1000px; margin: 0 auto; padding: 0 22px; position: relative; z-index: 3; }
    .site-header {
      position: sticky;
      top: 0;
      z-index: 20;
      background: rgba(0,0,0,.85);
      border-bottom: 1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(12px);
    }
    .header-inner {
      min-height: 70px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 18px;
    }
    .brand { display: inline-flex; align-items: center; }
    .brand img { height: 44px; width: auto; }
    .main-nav { display: flex; gap: 20px; justify-content: center; flex: 1; }
    .nav-link {
      padding: 10px 14px;
      border-radius: 12px;
      color: #cfd6dc;
      transition: all 0.3s;
    }
    .nav-link.active, .nav-link:hover { background: var(--panel-2); color: #fff; }
    .lang { position: relative; display: inline-block; }
    .lang-btn {
      background: #0b0b0b;
      color: #e9eef2;
      border: 1px solid #2a2f36;
      padding: 8px 14px;
      border-radius: 14px;
      cursor: pointer;
      min-width: 64px;
    }
    .lang-menu {
      position: absolute;
      top: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);
      z-index: 30;
      list-style: none;
      margin: 0;
      padding: 6px;
      background: #000;
      border: 1px solid #2a2f36;
      border-radius: 16px;
      box-shadow: var(--shadow);
      display: none;
      min-width: 100%;
    }
    .lang.open .lang-menu { display: block; }
    .lang-menu a {
      display: block;
      text-align: center;
      padding: 10px 14px;
      border-radius: 10px;
      color: #cfd6dc;
      transition: all 0.3s;
    }
    .lang-menu a:hover { background: #0f1216; color: #fff; }
    .lang-menu a.active-lang { font-weight: 800; color: #fff; }
    .hero { 
      padding: 80px 0 40px; 
      position: relative;
      z-index: 3;
    }
    .hero-content {
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
    }
    .hero-content h1 {
      font-size: 48px;
      font-weight: 900;
      margin: 0 0 20px;
      line-height: 1.1;
      color: #fff;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3), 0 4px 8px rgba(0,0,0,0.2);
    }
    .hero-subtitle {
      font-size: 20px;
      color: rgba(255,255,255,0.85);
      margin: 0 0 30px;
      line-height: 1.6;
    }
    .service-box {
      background: rgba(18, 20, 22, 1.0);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 24px;
      padding: 40px;
      margin: 40px auto;
      max-width: 900px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    }
    .service-box h2 {
      font-size: 32px;
      font-weight: 900;
      margin: 0 0 24px;
      color: var(--accent);
    }
    .service-box p {
      font-size: 18px;
      line-height: 1.8;
      color: rgba(255,255,255,0.85);
      margin-bottom: 20px;
    }
    .features-list {
      list-style: none;
      padding: 0;
      margin: 30px 0;
    }
    .features-list li {
      padding: 16px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      font-size: 18px;
      color: rgba(255,255,255,0.9);
    }
    .features-list li:last-child { border-bottom: none; }
    .features-list strong {
      color: var(--accent);
      font-weight: 800;
    }
    .form-section {
      background: rgba(18, 20, 22, 1.0);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 24px;
      padding: 40px;
      margin: 40px auto 80px;
      max-width: 900px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    }
    .form-section h2 {
      font-size: 32px;
      font-weight: 900;
      margin: 0 0 30px;
      color: #fff;
      text-align: center;
    }
    .step-indicator {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 40px;
    }
    .progress-bar-container {
      width: 100%;
      height: 8px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      margin-bottom: 30px;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--accent) 0%, #15a068 100%);
      width: 33.33%;
      transition: width 0.4s ease;
      border-radius: 10px;
    }
    .progress-text {
      text-align: center;
      margin-top: 10px;
      font-size: 14px;
      color: rgba(255,255,255,0.7);
    }
    .step {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      font-size: 20px;
      color: rgba(255,255,255,0.5);
      transition: all 0.3s;
    }
    .step.active {
      background: var(--accent);
      border-color: var(--accent);
      color: #042419;
      transform: scale(1.1);
    }
    .step.completed {
      background: rgba(25, 195, 125, 0.3);
      border-color: var(--accent);
      color: var(--accent);
    }
    .form-step { display: none; }
    .form-step.active { display: block; animation: fadeIn 0.4s; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .step-title {
      font-size: 26px;
      font-weight: 900;
      margin: 0 0 30px;
      color: var(--accent);
      text-align: center;
    }
    .form-group { margin-bottom: 24px; }
    .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: rgba(255,255,255,0.9); }
    .form-group label .required { color: #ff6b6b; }
    .form-group input, .form-group select, .form-group textarea {
      width: 100%;
      padding: 14px 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      color: #fff;
      font-size: 16px;
      font-family: inherit;
      transition: all 0.3s;
    }
    .form-group input[list] {
      appearance: none;
      -webkit-appearance: none;
    }
    .form-group select { 
      cursor: pointer; 
      appearance: none; 
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23fff' d='M6 9L1 4h10z'/%3E%3C/svg%3E"); 
      background-repeat: no-repeat; 
      background-position: right 16px center; 
      padding-right: 40px; 
    }
    .form-group select option { background: #1a1d20; color: #fff; padding: 12px; }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus { 
      outline: none; 
      border-color: var(--accent); 
      background: rgba(255,255,255,0.08); 
    }
    .form-group textarea { min-height: 120px; resize: vertical; }
    .form-group small { display: block; margin-top: 6px; color: rgba(255,255,255,0.6); font-size: 14px; }
    .checkbox-group { display: flex; align-items: flex-start; gap: 12px; }
    .checkbox-group input[type="checkbox"] { width: auto; margin-top: 4px; cursor: pointer; }
    .checkbox-group label { margin: 0; cursor: pointer; font-weight: 400; }
    .two-column { display: grid; gap: 16px; }
    @media (min-width: 768px) { .two-column { grid-template-columns: 1fr 1fr; } }
    .choice-grid { display: grid; gap: 16px; margin: 24px 0; }
    @media (min-width: 768px) { .choice-grid { grid-template-columns: repeat(3, 1fr); } }
    .choice-card { 
      background: rgba(255,255,255,0.05); 
      border: 2px solid rgba(255,255,255,0.1); 
      border-radius: 16px; 
      padding: 32px 24px; 
      text-align: center; 
      cursor: pointer; 
      transition: all 0.3s; 
    }
    .choice-card:hover { 
      border-color: var(--accent); 
      background: rgba(25, 195, 125, 0.1); 
      transform: translateY(-4px); 
    }
    .choice-card.selected { 
      border-color: var(--accent); 
      background: rgba(25, 195, 125, 0.15); 
      box-shadow: 0 0 20px rgba(25, 195, 125, 0.3); 
    }
    .choice-card h4 { margin: 0 0 8px; font-size: 24px; color: #fff; }
    .choice-card .price { font-size: 18px; font-weight: 700; color: var(--accent); margin: 8px 0; }
    .choice-card p { margin: 0; font-size: 14px; color: rgba(255,255,255,0.6); }
    .track-field { 
      background: rgba(25, 195, 125, 0.05); 
      border: 1px solid rgba(25, 195, 125, 0.2); 
      border-radius: 16px; 
      padding: 24px; 
      margin: 20px 0; 
    }
    .track-field h4 { margin: 0 0 20px; color: var(--accent); font-size: 20px; }
    .radio-group { display: flex; flex-wrap: wrap; gap: 16px; margin-top: 8px; }
    .radio-option { display: flex; align-items: center; gap: 8px; }
    .radio-option input[type="radio"] { width: auto; margin-top: 4px; cursor: pointer; }
    .radio-option label { margin: 0; cursor: pointer; font-weight: 400; }
    .btn-submit { 
      width: 100%; 
      padding: 18px 32px; 
      background: linear-gradient(135deg, var(--accent) 0%, #15a068 100%); 
      color: #042419; 
      border: none; 
      border-radius: 14px; 
      font-weight: 800; 
      font-size: 18px; 
      cursor: pointer; 
      transition: all 0.3s; 
      box-shadow: 0 8px 24px rgba(25, 195, 125, 0.3); 
    }
    .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 12px 32px rgba(25, 195, 125, 0.5); }
    .btn-submit:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-group { display: flex; gap: 12px; margin-top: 30px; }
    .btn-back { 
      flex: 1; 
      padding: 18px 32px; 
      background: rgba(255,255,255,0.1); 
      color: #fff; 
      border: 1px solid rgba(255,255,255,0.2); 
      border-radius: 14px; 
      font-weight: 800; 
      font-size: 18px; 
      cursor: pointer; 
      transition: all 0.3s; 
    }
    .btn-back:hover { background: rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.3); }
    .btn-next { 
      flex: 2; 
      padding: 18px 32px; 
      background: linear-gradient(135deg, var(--accent) 0%, #15a068 100%); 
      color: #042419; 
      border: none; 
      border-radius: 14px; 
      font-weight: 800; 
      font-size: 18px; 
      cursor: pointer; 
      transition: all 0.3s; 
      box-shadow: 0 8px 24px rgba(25, 195, 125, 0.3); 
    }
    .btn-next:hover { transform: translateY(-2px); box-shadow: 0 12px 32px rgba(25, 195, 125, 0.5); }
    .site-footer { 
      border-top: 1px solid rgba(255,255,255,.08); 
      padding: 24px 0; 
      position: relative; 
      z-index: 3; 
      background: rgba(0,0,0,0.3); 
      backdrop-filter: blur(10px); 
    }
    .footer-inner { 
      display: flex; 
      align-items: center;
      justify-content: space-between; 
      gap: 16px; 
      flex-wrap: wrap; 
    }
    .legal { display: flex; gap: 10px; flex-wrap: wrap; }
    .chip { 
      background: rgba(17, 21, 24, 0.8); 
      border: 1px solid rgba(255,255,255,0.1); 
      color: #cfd6dc; 
      padding: 8px 12px; 
      border-radius: 12px; 
      font-size: 14px; 
      transition: all 0.3s; 
    }
    .chip:hover { color: #fff; border-color: rgba(255,255,255,0.2); }
    @media (max-width: 768px) {
      .hero-content h1 { font-size: 32px; }
      .hero-subtitle { font-size: 18px; }
      .service-box, .form-section { padding: 24px; }
      .btn-group { flex-direction: column; }
      .btn-back, .btn-next { flex: 1; }
    }
  </style>
  <style id="clarity-tweak">
    .site-header { background: rgba(0,0,0,.80) !important; backdrop-filter: none !important; }
    .service-box, .form-section { background: rgba(18,20,22,0.85) !important; backdrop-filter: none !important; }
    .site-footer { background: rgba(0,0,0,.30) !important; backdrop-filter: none !important; }
    .lang-menu { background: rgba(0,0,0,.90) !important; }
    .form-group input, .form-group select, .form-group textarea {
      background: rgba(255,255,255,0.05) !important;
      border: 1px solid rgba(255,255,255,0.3) !important;
      box-shadow: 0 1px 0 rgba(0,0,0,0.4) inset !important;
    }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
      border-color: rgba(25,195,125,1) !important;
      box-shadow: 0 0 0 2px rgba(25,195,125,0.4) !important;
    }
    .track-field {
      background: rgba(25,195,125,0.08) !important;
      border: 1px solid rgba(25,195,125,0.3) !important;
    }
    #smokeCanvas { opacity: 0.5 !important; }
    #musicNotesCanvas { opacity: 0.6 !important; }
  </style>
</head>
<body>
  <canvas id="smokeCanvas"></canvas>
  <canvas id="musicNotesCanvas"></canvas>

  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index-en.html" aria-label="HOXOH MUSIC">
        <img src="assets/logo/hoxoh-music-header-239x62.png" alt="HOXOH MUSIC" width="239" height="62">
      </a>
      <nav class="main-nav">
        <a class="nav-link" href="index-en.html">Home</a>
        <a class="nav-link" href="albums-en.html">Albums</a>
        <a class="nav-link" href="kontakt-en.html">Contact</a>
      </nav>
      <div class="lang">
        <button class="lang-btn" aria-haspopup="true" aria-expanded="false">EN ▾</button>
        <ul class="lang-menu" role="menu">
          <li><a href="musikproduktion-service.html">ES</a></li>
          <li><a href="musikproduktion-service-de.html">DE</a></li>
          <li><a class="active-lang" href="musikproduktion-service-en.html">EN</a></li>
        </ul>
      </div>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1>Bring your sound to life.<br>Start your music project today.</h1>
        <p class="hero-subtitle">
          You have the vision; we have the studio and the know-how.<br>
          Together we'll bring your track to life.
        </p>
      </div>
    </section>

  <div class="container">
    <div class="service-box">
      <h2>Our Music Production Service</h2>
      <p>We guide you from the first sketch to the final mastering, ready for Spotify and all streaming platforms.</p>
      <p>The perfect song for any occasion: birthday, wedding, anniversary, or your big project. Whether it's a radio hit, soundtrack, or professional beats for your career, we deliver quality that looks and sounds great.</p>
      
      <p style="text-align: center; margin: 30px 0 20px; font-weight: 700; color: #fff; font-size: 20px;">
        We're proud to offer **one of the lowest prices in the world** for professional music production, including full buyout.
      </p>

      <h3 style="margin: 30px 0 20px; color: var(--accent); font-size: 24px;">Package Prices at a Glance:</h3>
      <ul style="list-style: none; padding: 0; margin-bottom: 40px;">
          <li style="padding: 8px 0; font-size: 18px;"><strong>🎵 Starter Single (1 Song):</strong> Just $99</li>
          <li style="padding: 8px 0; font-size: 18px;"><strong>💿 EP Package (5 Songs):</strong> $396 (equivalent to only $79.20 per track)</li>
          <li style="padding: 8px 0; font-size: 18px;"><strong>📀 Album Deal (10 Songs):</strong> $750 (equivalent to only $75 per track)</li>
      </ul>

      <h3 style="margin: 30px 0 20px; color: var(--accent); font-size: 24px;">What We Offer:</h3>
      <ul class="features-list">
        <li><strong>Complete Production:</strong> Composition, arrangements, and professional mixing.</li>
        <li><strong>Full Buyout:</strong> All rights transfer exclusively to you.</li>
        <li><strong>Spotify-Ready Mastering:</strong> Meets digital platform standards.</li>
        <li><strong>Cover Design Included:</strong> Main cover for single; per-track covers for EP/Album.</li>
        <li><strong>Fast Delivery:</strong> Thanks to modern methods, we produce at high speed without quality loss.</li>
      </ul>
    </div>
    <div class="form-section" id="order-form">
      <h2>📝 Order Your Music Production</h2>
      <div class="progress-bar-container">
        <div class="progress-bar" id="progressBar" style="width: 33.33%;"></div>
      </div>
      <p class="progress-text" id="progressText">Step 1 of 3: Personal Details</p>
      <div class="step-indicator">
        <div class="step active" id="stepInd1">1</div>
        <div class="step" id="stepInd2">2</div>
        <div class="step" id="stepInd3">3</div>
      </div>
      <form id="musicForm" novalidate>
        <div class="form-step active" id="step1">
          <h3 class="step-title">🙋 Personal Details</h3>
          <div class="two-column">
            <div class="form-group">
              <label for="firstName">First Name <span class="required">*</span></label>
              <input type="text" name="first_name" id="firstName" required placeholder="First Name">
            </div>
            <div class="form-group">
              <label for="lastName">Last Name <span class="required">*</span></label>
              <input type="text" name="last_name" id="lastName" required placeholder="Last Name">
            </div>
          </div>
          <div class="two-column">
            <div class="form-group">
              <label for="artistName">Artist Name <span class="required">*</span></label>
              <input type="text" name="artist_name" id="artistName" required placeholder="e.g. Your Artist Name or Real Name">
            </div>
            <div class="form-group">
              <label for="labelName">Label (Optional)</label>
              <input type="text" name="label_name" id="labelName" placeholder="e.g. Your Label">
            </div>
          </div>
          <div class="checkbox-group">
            <input type="checkbox" id="syncWithArtistName" name="sync_with_artist_name">
            <label for="syncWithArtistName">First and Last Name are identical to Artist Name</label>
          </div>
          <div class="two-column">
            <div class="form-group">
              <label for="country">Country <span class="required">*</span></label>
              <input type="text" name="country" id="country" list="country_list" required placeholder="e.g. USA, UK, Canada...">
              <datalist id="country_list">
                <option value="USA">
                <option value="UK">
                <option value="Canada">
                <option value="Australia">
                <option value="Germany">
                <option value="France">
                <option value="Italy">
                <option value="Spain">
                <option value="Mexico">
                <option value="Brazil">
                <option value="India">
                <option value="China">
                <option value="Japan">
                <option value="South Korea">
                <option value="Nigeria">
                <option value="South Africa">
                <option value="Morocco">
                <option value="Switzerland">
                <option value="Austria">
                <option value="Belgium">
                <option value="Russia">
                <option value="Sweden">
                <option value="Norway">
                <option value="Denmark">
              </datalist>
            </div>
            <div class="form-group">
              <label for="birthYear">Year of Birth <span class="required">*</span></label>
              <input type="number" name="birth_year" id="birthYear" required min="1920" max="2010" placeholder="e.g. 1990">
            </div>
          </div>
          <div class="form-group">
            <label for="email">Email <span class="required">*</span></label>
            <input type="email" name="email" id="email" required placeholder="your@email.com">
          </div>
          <div class="checkbox-group">
            <input type="checkbox" id="terms" required>
            <label for="terms">I have read and accept the <a href="agb-en.html" target="_blank">General Terms and Conditions</a>.</label>
          </div>
          <div class="btn-group">
            <button type="button" class="btn-next" id="nextStep1">Next Step →</button>
          </div>
        </div>
        <div class="form-step" id="step2">
          <h3 class="step-title">💿 Choose Your Package</h3>
          <div class="choice-grid">
            <div class="choice-card" data-package="1" data-price="99">
              <h4>Single</h4>
              <div class="price">$99</div>
              <p>1 professional track</p>
            </div>
            <div class="choice-card" data-package="5" data-price="396">
              <h4>EP</h4>
              <div class="price">$396</div>
              <p>5 tracks ($79.20 each)</p>
            </div>
            <div class="choice-card" data-package="10" data-price="750">
              <h4>Album</h4>
              <div class="price">$750</div>
              <p>10 tracks ($75 each)</p>
            </div>
          </div>
          <input type="hidden" name="track_package" id="trackPackage">
          <input type="hidden" name="base_amount" id="baseAmount">
          <div class="btn-group">
            <button type="button" class="btn-back" id="backStep2">← Back</button>
            <button type="button" class="btn-next" id="nextStep2" disabled>Next Step →</button>
          </div>
        </div>
        <div class="form-step" id="step3">
          <h3 class="step-title">🎶 Track Details</h3>
          <div id="trackFieldsContainer"></div>
          <div class="btn-group">
            <button type="button" class="btn-back" id="backStep3">← Back</button>
            <button type="submit" class="btn-submit">To Payment →</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <footer class="site-footer">
    <div class="container footer-inner">
      <span>© 2025 HOXOH MUSIC. All rights reserved.</span>
      <div class="legal">
        <a class="chip" href="impressum-en.html">Imprint</a>
        <a class="chip" href="datenschutz-en.html">Privacy Policy</a>
        <a class="chip" href="cookies-en.html">Cookies</a>
        <a class="chip" href="explizit-en.html">Explicit Content</a>
        <a class="chip" href="agb-en.html">T&C</a>
      </div>
    </div>
  </footer>

  <script>
    // ==========================================================
    // JS for Smoke Effect (Background)
    // ==========================================================

    const smokeCanvas = document.getElementById('smokeCanvas');
    const smokeCtx = smokeCanvas.getContext('2d');
    let W_s = smokeCanvas.width = window.innerWidth;
    let H_s = smokeCanvas.height = window.innerHeight;

    class Particle {
      constructor() {
        this.x = Math.random() * W_s;
        this.y = Math.random() * H_s;
        this.size = Math.random() * 50 + 20;
        this.speedX = Math.random() * 0.2 - 0.1;
        this.speedY = Math.random() * 0.2 - 0.1;
        this.opacity = Math.random() * 0.5 + 0.1;
        this.hue = Math.random() * 360;
      }
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        if (this.x > W_s || this.x < 0) this.speedX = -this.speedX;
        if (this.y > H_s || this.y < 0) this.speedY = -this.speedY;
      }
      draw() {
        smokeCtx.beginPath();
        smokeCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        smokeCtx.fillStyle = `hsla(${this.hue}, 70%, 50%, ${this.opacity})`;
        smokeCtx.fill();
      }
    }

    const particles = [];
    for (let i = 0; i < 80; i++) {
      particles.push(new Particle());
    }

    function animateSmoke() {
      smokeCtx.clearRect(0, 0, W_s, H_s);
      smokeCtx.globalCompositeOperation = 'lighter';
      for (const particle of particles) {
        particle.update();
        particle.draw();
      }
      requestAnimationFrame(animateSmoke);
    }

    animateSmoke();

    window.addEventListener('resize', () => {
      W_s = smokeCanvas.width = window.innerWidth;
      H_s = smokeCanvas.height = window.innerHeight;
    });

    // ==========================================================
    // JS for Music Notes Animation
    // ==========================================================

    const notesCanvas = document.getElementById('musicNotesCanvas');
    const notesCtx = notesCanvas.getContext('2d');
    let W_n = notesCanvas.width = window.innerWidth;
    let H_n = notesCanvas.height = window.innerHeight;

    const symbols = ['♩', '♪', '♫', '♬'];

    class MusicNote {
      constructor() {
        this.reset();
      }
      reset() {
        this.x = Math.random() * W_n;
        this.y = H_n + 50;
        this.size = Math.random() * 30 + 20; // Increased size range
        this.targetSize = Math.random() * 40 + 20; // Increased target size
        this.speed = Math.random() * 1.5 + 0.5;
        this.opacity = Math.random() * 0.5 + 0.4; // Increased minimum opacity for bolder appearance
        this.rotation = Math.random() * 360;
        this.symbol = symbols[Math.floor(Math.random() * symbols.length)];
        this.hue = Math.random() * 360;
      }
      update() {
        this.y -= this.speed;
        this.size = Math.min(this.size + 0.1, this.targetSize);
        this.opacity = Math.max(this.opacity - 0.001, 0.2); // Minimum opacity increased
        this.rotation += 0.5;
        if (this.y < -50) this.reset();
      }
      draw() {
        notesCtx.save();
        notesCtx.translate(this.x, this.y);
        notesCtx.rotate(this.rotation * Math.PI / 180);
        notesCtx.font = `bold ${this.size}px Arial`; // Added bold font
        notesCtx.fillStyle = `hsla(${this.hue}, 80%, 50%, ${this.opacity})`; // Increased saturation
        notesCtx.textAlign = 'center';
        notesCtx.textBaseline = 'middle';
        notesCtx.fillText(this.symbol, 0, 0);
        notesCtx.restore();
      }
    }

    const musicNotes = [];
    for (let i = 0; i < 200; i++) { // Increased from 100 to 200
      musicNotes.push(new MusicNote());
    }

    function animateNotes() {
      notesCtx.clearRect(0, 0, W_n, H_n);
      for (const note of musicNotes) {
        note.update();
        note.draw();
      }
      requestAnimationFrame(animateNotes);
    }

    animateNotes();

    window.addEventListener('resize', () => {
      W_n = notesCanvas.width = window.innerWidth;
      H_n = notesCanvas.height = window.innerHeight;
      musicNotes.forEach(note => note.reset());
    });

    // ==========================================================
    // JS for Forms and Redirection (Form Logic)
    // ==========================================================

    const form = document.getElementById('musicForm');
    const steps = document.querySelectorAll('.form-step');
    const stepIndicators = document.querySelectorAll('.step');
    const progressBar = document.getElementById('progressBar');
    const progressText = document.getElementById('progressText');
    const nextStep1Btn = document.getElementById('nextStep1');
    const nextStep2Btn = document.getElementById('nextStep2');
    const backStep2Btn = document.getElementById('backStep2');
    const backStep3Btn = document.getElementById('backStep3');
    const choiceCards = document.querySelectorAll('.choice-card');
    const trackFieldsContainer = document.getElementById('trackFieldsContainer');
    const trackPackageInput = document.getElementById('trackPackage');
    const baseAmountInput = document.getElementById('baseAmount');
    const syncCheckbox = document.getElementById('syncWithArtistName');
    const firstNameInput = document.getElementById('firstName');
    const lastNameInput = document.getElementById('lastName');
    const artistNameInput = document.getElementById('artistName');

    let currentStep = 1;
    let selectedPackage = null;
    let trackCount = 0;
    const TRACK_PACKAGES = {
      '1': 1,
      '5': 5,
      '10': 10
    };
    
    function displayValidationError(input, message) {
        alert(`❌ Error in field: ${input.name || input.id || input.tagName}\n\n${message}`);
        
        input.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        if (input.tagName === 'INPUT' || input.tagName === 'SELECT' || input.tagName === 'TEXTAREA') {
            input.style.borderColor = '#ff6b6b';
            input.style.borderWidth = '2px';
            setTimeout(() => {
                input.style.borderColor = '';
                input.style.borderWidth = '';
            }, 3000);
            input.focus();
        } 
        else if (input.classList && input.classList.contains('radio-group')) {
            input.style.outline = '2px solid #ff6b6b';
            input.style.borderRadius = '8px';
            setTimeout(() => {
                input.style.outline = '';
                input.style.borderRadius = '';
            }, 3000);
            const firstRadio = input.querySelector('input[type="radio"]');
            if (firstRadio) firstRadio.focus();
        }
    }

    function updateStepUI() {
      steps.forEach((step, index) => {
        step.classList.toggle('active', index === currentStep - 1);
      });

      stepIndicators.forEach((indicator, index) => {
        if (index < currentStep) {
          indicator.classList.add('completed');
        } else {
          indicator.classList.remove('completed');
        }
        indicator.classList.toggle('active', index === currentStep - 1);
      });

      const progress = (currentStep - 1) / (steps.length - 1) * 100;
      progressBar.style.width = `${progress}%`;

      const stepNames = ["Personal Details", "Choose Your Package", "Track Details"];
      progressText.textContent = `Step ${currentStep} of ${steps.length}: ${stepNames[currentStep - 1]}`;

      document.getElementById('order-form').scrollIntoView({ behavior: 'smooth', block: 'start' });

      if (currentStep === 2) {
        checkStep2Validity();
      }
    }

    function checkStep2Validity() {
      nextStep2Btn.disabled = !selectedPackage;
    }

    function validateStep3() {
        const trackFields = trackFieldsContainer.querySelectorAll('.track-field');
        let isValid = true;
        
        if (trackCount > 1) {
            const albumNameInput = document.getElementById('albumName');
            if (!albumNameInput || !albumNameInput.value.trim()) {
                displayValidationError(albumNameInput, 'EP/Album Name is required.');
                isValid = false;
                return isValid;
            }
        }
        
        trackFields.forEach((field, index) => {
            if (!isValid) return;

            const requiredInputs = field.querySelectorAll('input[required]:not([type="radio"]), textarea[required], select[required]');
            requiredInputs.forEach(input => {
                if (!isValid) return;

                if (!input.value.trim() || input.value === "") {
                    displayValidationError(input, 'This field is required.');
                    isValid = false;
                    return;
                }

                if (input.tagName === 'TEXTAREA' && input.getAttribute('minlength')) {
                    const minLength = parseInt(input.getAttribute('minlength'));
                    if (input.value.length < minLength) {
                        displayValidationError(input, `The description must have at least ${minLength} characters. Currently has ${input.value.length}.`);
                        isValid = false;
                        return;
                    }
                }
            });

            if (!isValid) return; 

            const vocalsSelected = field.querySelector(`input[name="track_vocals_${index + 1}"]:checked`);
            if (!vocalsSelected) {
                const radioGroups = field.querySelectorAll('.radio-group');
                const vocalsRadioGroup = radioGroups[0];
                displayValidationError(vocalsRadioGroup, 'You must select the vocals type.');
                isValid = false;
                return;
            }
            
            const explicitSelected = field.querySelector(`input[name="track_explicit_${index + 1}"]:checked`);
            if (!explicitSelected) {
                const radioGroups = field.querySelectorAll('.radio-group');
                const explicitRadioGroup = radioGroups[1];
                displayValidationError(explicitRadioGroup, 'You must indicate if the content is explicit.');
                isValid = false;
                return;
            }
        });
        
        return isValid;
    }

    function goToNextStep() {
      if (currentStep === 1) {
        const requiredInputs = document.querySelectorAll('#step1 input[required]:not(#terms):not(#syncWithArtistName), #step1 input[type="email"], #step1 input[type="number"]');
        let allFieldsValid = true;
        let firstInvalidInput = null;

        requiredInputs.forEach(input => {
          if (!input.value.trim() || !input.checkValidity()) {
            allFieldsValid = false;
            if (!firstInvalidInput) {
                firstInvalidInput = input;
            }
          }
        });
        const termsAccepted = document.getElementById('terms').checked;

        if (!allFieldsValid) {
          displayValidationError(firstInvalidInput, 'Please ensure all required fields are filled and the format is correct (Email, Year of birth, etc.).');
          return;
        }
        if (!termsAccepted) {
          alert('You must read and accept the General Terms and Conditions to continue.');
          return;
        }
      }

      if (currentStep === 2 && !selectedPackage) {
        alert('Select a music production package to continue.');
        return;
      }
      
      if (currentStep < steps.length) {
        currentStep++;
        updateStepUI();
      }
    }

    function goToPreviousStep() {
      if (currentStep > 1) {
        currentStep--;
        updateStepUI();
      }
    }

    nextStep1Btn.addEventListener('click', goToNextStep);

    choiceCards.forEach(card => {
      card.addEventListener('click', function() {
        choiceCards.forEach(c => c.classList.remove('selected'));
        this.classList.add('selected');

        selectedPackage = this.dataset.package;
        trackCount = TRACK_PACKAGES[selectedPackage];
        const basePrice = this.dataset.price;

        trackPackageInput.value = selectedPackage;
        baseAmountInput.value = basePrice;
        
        checkStep2Validity();
      });
    });

    backStep2Btn.addEventListener('click', goToPreviousStep);

    nextStep2Btn.addEventListener('click', () => {
      if (selectedPackage) {
        generateTrackFields(trackCount);
        goToNextStep();
      }
    });

    const genreDatalist = `
        <datalist id="genre_list">
          <option value="Pop">
          <option value="Rock">
          <option value="Hip-Hop / Rap">
          <option value="R&B">
          <option value="EDM">
          <option value="Techno">
          <option value="House">
          <option value="Trance">
          <option value="Jazz">
          <option value="Classical">
          <option value="Reggaeton">
          <option value="Latin Pop">
          <option value="Latin Trap">
          <option value="Salsa">
          <option value="Cumbia">
          <option value="Tango">
          <option value="Samba">
          <option value="Bachata">
          <option value="Merengue">
          <option value="Mariachi / Ranchera">
          <option value="Bossa Nova">
          <option value="World Music">
          <option value="Country">
          <option value="Ballad">
          <option value="Latin Techno">
          <option value="Schlager">
          <option value="Alternative Rock">
          <option value="Heavy Metal">
          <option value="Afrobeat">
          <option value="Drill">
        </datalist>
    `;

    const vibeDatalist = `
        <datalist id="vibe_list">
          <option value="Happy / Energetic">
          <option value="Melancholic / Sad">
          <option value="Romantic / Loving">
          <option value="Aggressive / Powerful">
          <option value="Relaxed / Chill">
          <option value="Motivational / Inspiring">
          <option value="Dark / Mysterious">
          <option value="Party / Festive">
          <option value="Nostalgic / Sentimental">
          <option value="Epic / Dramatic">
        </datalist>
    `;

    const tempoDatalist = `
        <datalist id="tempo_list">
          <option value="Very slow (40-60 BPM)">
          <option value="Slow (60-90 BPM)">
          <option value="Medium (90-120 BPM)">
          <option value="Fast (120-140 BPM)">
          <option value="Very fast (140-180 BPM)">
          <option value="Extreme (180+ BPM)">
        </datalist>
    `;

    const languageDatalist = `
        <datalist id="language_list">
          <option value="Spanish">
          <option value="English">
          <option value="German">
          <option value="French">
          <option value="Italian">
          <option value="Portuguese">
          <option value="Turkish">
          <option value="Arabic">
          <option value="Russian">
          <option value="Polish">
          <option value="Instrumental (no language)">
          <option value="Chinese">
          <option value="Japanese">
          <option value="Hindi">
        </datalist>
    `;

    function generateTrackFields(count) {
      trackFieldsContainer.innerHTML = '';
      
      if (count > 1) {
        const albumField = document.createElement('div');
        albumField.classList.add('form-group');
        albumField.innerHTML = `
          <label for="albumName">EP/Album Name <span class="required">*</span></label>
          <input type="text" name="album_name" id="albumName" required placeholder="e.g. My First Album">
        `;
        trackFieldsContainer.appendChild(albumField);
      }
      
      trackFieldsContainer.innerHTML += genreDatalist;
      trackFieldsContainer.innerHTML += vibeDatalist;
      trackFieldsContainer.innerHTML += tempoDatalist;
      trackFieldsContainer.innerHTML += languageDatalist;

      for (let i = 1; i <= count; i++) {
        const field = document.createElement('div');
        field.classList.add('track-field');
        field.innerHTML = `
          <h4>Track ${i}</h4>
          
          <div class="form-group">
            <label for="trackTitle${i}">Preliminary Track Title <span class="required">*</span></label>
            <input type="text" name="track_title_${i}" id="trackTitle${i}" required placeholder="My Cool Song">
          </div>

          <div class="two-column">
            <div class="form-group">
              <label for="trackGenre1${i}">Main Genre <span class="required">*</span></label>
              <input type="text" name="track_genre1_${i}" id="trackGenre1${i}" list="genre_list" required placeholder="e.g. Hip Hop, EDM, Pop">
              <small>Type for autocomplete or enter any genre.</small>
            </div>
            <div class="form-group">
              <label for="trackGenre2${i}">Secondary Genre (Optional)</label>
              <input type="text" name="track_genre2_${i}" id="trackGenre2${i}" list="genre_list" placeholder="e.g. Trap, Synthwave">
              <small>Additional genre or subgenre.</small>
            </div>
          </div>

          <div class="form-group">
            <label for="trackVibe${i}">Track Vibe / Mood <span class="required">*</span></label>
             <input type="text" name="track_vibe_${i}" id="trackVibe${i}" list="vibe_list" required placeholder="e.g. Melancholic, Energetic, Epic">
            <small>Type for autocomplete or enter any mood.</small>
          </div>
          
          <div class="two-column">
             <div class="form-group">
              <label for="trackTempo${i}">Tempo (BPM) <span class="required">*</span></label>
              <input type="text" name="track_tempo_${i}" id="trackTempo${i}" list="tempo_list" required placeholder="e.g. Medium (90-120 BPM) or an exact number">
              <small>Choose or enter an exact number.</small>
            </div>
            <div class="form-group">
              <label for="trackDuration${i}">Approximate Duration</label>
              <input type="text" name="track_duration_${i}" id="trackDuration${i}" placeholder="e.g. 3:30">
              <small>Optional.</small>
            </div>
          </div>

          <div class="form-group">
            <label>Vocals Type <span class="required">*</span></label>
            <div class="radio-group">
              <div class="radio-option">
                <input type="radio" id="vocalsMale${i}" name="track_vocals_${i}" value="Male" required>
                <label for="vocalsMale${i}">Male</label>
              </div>
              <div class="radio-option">
                <input type="radio" id="vocalsFemale${i}" name="track_vocals_${i}" value="Female" required>
                <label for="vocalsFemale${i}">Female</label>
              </div>
              <div class="radio-option">
                <input type="radio" id="vocalsBoth${i}" name="track_vocals_${i}" value="Both" required>
                <label for="vocalsBoth${i}">Both</label>
              </div>
              <div class="radio-option">
                <input type="radio" id="vocalsNone${i}" name="track_vocals_${i}" value="Instrumental" required>
                <label for="vocalsNone${i}">Instrumental</label>
              </div>
            </div>
          </div>

          <div class="two-column">
            <div class="form-group">
              <label for="languageMain${i}">Main Vocals Language <span class="required">*</span></label>
              <input type="text" name="track_language_main_${i}" id="languageMain${i}" list="language_list" required placeholder="e.g. English">
            </div>
            <div class="form-group">
              <label for="languageSecond${i}">Secondary Language (Optional)</label>
              <input type="text" name="track_language_second_${i}" id="languageSecond${i}" list="language_list" placeholder="e.g. Spanish">
            </div>
          </div>
          
          <div class="form-group">
            <label>Explicit Content <span class="required">*</span></label>
            <div class="radio-group">
              <div class="radio-option">
                <input type="radio" id="explicitYes${i}" name="track_explicit_${i}" value="Yes" required>
                <label for="explicitYes${i}">Yes (Parental Advisory)</label>
              </div>
              <div class="radio-option">
                <input type="radio" id="explicitNo${i}" name="track_explicit_${i}" value="No" required>
                <label for="explicitNo${i}">No</label>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label for="trackOccasion${i}">Occasion / Purpose of the Track <span class="required">*</span></label>
            <select name="track_occasion_${i}" id="trackOccasion${i}" required>
              <option value="">-- Select --</option>
              <option value="Birthday">Birthday</option>
              <option value="Wedding">Wedding</option>
              <option value="Anniversary">Anniversary</option>
              <option value="Own Project">Own Project</option>
              <option value="Commercial">Commercial</option>
              <option value="Music Career">Music Career</option>
              <option value="Gift">Gift</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label for="trackInstrumentsWanted${i}">Desired Instruments or Sounds (Optional)</label>
            <input type="text" name="track_instruments_wanted_${i}" id="trackInstrumentsWanted${i}" placeholder="e.g., Saxophone, Epic strings, Deep bass">
          </div>
          
          <div class="form-group">
            <label for="trackInstrumentsUnwanted${i}">Instruments or sounds to avoid (Optional)</label>
            <input type="text" name="track_instruments_unwanted_${i}" id="trackInstrumentsUnwanted${i}" placeholder="e.g., Electric guitar, Bell sounds">
          </div>
          
          <div class="form-group">
            <label for="trackDescription${i}">Idea description / Story (Min. 250 characters) <span class="required">*</span></label>
            <textarea name="track_description_${i}" id="trackDescription${i}" required minlength="250" placeholder="Describe your vision, the story behind the song, or any crucial details. A detailed description (minimum 250 characters) helps HOXOH perfectly capture your vision."></textarea>
          </div>
          
          <div class="form-group">
            <label for="trackReference${i}">Musical reference link (Optional)</label>
            <input type="url" name="track_reference_${i}" id="trackReference${i}" placeholder="e.g., YouTube or Spotify link to a song with a similar sound.">
            <small>This helps HOXOH understand your desired style.</small>
          </div>
        `;
        trackFieldsContainer.appendChild(field);
      }
    }

    backStep3Btn.addEventListener('click', goToPreviousStep);

    syncCheckbox.addEventListener('change', function() {
      if (this.checked) {
        const firstName = firstNameInput.value.trim();
        const lastName = lastNameInput.value.trim();
        if (firstName && lastName) {
          artistNameInput.value = `${firstName} ${lastName}`;
        } else {
          alert('Please enter First Name and Last Name first to create the Artist Name.');
          this.checked = false;
        }
      }
    });

    firstNameInput.addEventListener('input', updateArtistName);
    lastNameInput.addEventListener('input', updateArtistName);

    function updateArtistName() {
      if (syncCheckbox.checked) {
        const firstName = firstNameInput.value.trim();
        const lastName = lastNameInput.value.trim();
        if (firstName && lastName) {
          artistNameInput.value = `${firstName} ${lastName}`;
        } else if (!firstName && !lastName) {
          artistNameInput.value = '';
        }
      }
    }

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      if (!validateStep3()) {
        return;
      }

      const currentYear = new Date().getFullYear();
      const randomID = Math.floor(1000 + Math.random() * 9000); 
      const orderNumber = `HOXOH-${currentYear}-${randomID}`;
      
      const formData = new FormData(form);
      const data = {};
      
      data.personal = {
        firstName: formData.get('first_name'),
        lastName: formData.get('last_name'),
        country: formData.get('country'),
        birthYear: formData.get('birth_year'),
        email: formData.get('email'),
        artistName: formData.get('artist_name'),
        labelName: formData.get('label_name')
      };

      data.package = {
        id: formData.get('track_package'),
        amount: formData.get('base_amount'),
        trackCount: trackCount,
      };

      if (trackCount > 1) {
        data.album_name = formData.get('album_name');
      }

      data.tracks = [];
      for (let i = 1; i <= trackCount; i++) {
        data.tracks.push({
          title: formData.get(`track_title_${i}`),
          genre1: formData.get(`track_genre1_${i}`),
          genre2: formData.get(`track_genre2_${i}`),
          vibe: formData.get(`track_vibe_${i}`),
          tempo: formData.get(`track_tempo_${i}`),
          duration: formData.get(`track_duration_${i}`),
          vocals: formData.get(`track_vocals_${i}`), 
          languageMain: formData.get(`track_language_main_${i}`),
          languageSecond: formData.get(`track_language_second_${i}`),
          explicit: formData.get(`track_explicit_${i}`), 
          occasion: formData.get(`track_occasion_${i}`),
          instrumentsWanted: formData.get(`track_instruments_wanted_${i}`),
          instrumentsUnwanted: formData.get(`track_instruments_unwanted_${i}`),
          description: formData.get(`track_description_${i}`),
          reference: formData.get(`track_reference_${i}`),
        });
      }

      const encodedData = encodeURIComponent(JSON.stringify(data));
      
      const redirectUrl = `payip-en.html?amount=${data.package.amount}&package=${data.package.id}&order=${orderNumber}&data=${encodedData}`;
      
      console.log('Redirecting to:', redirectUrl);
      window.location.href = redirectUrl;
    });
    
    const langBtn = document.querySelector('.lang-btn');
    const langContainer = document.querySelector('.lang');

    langBtn.addEventListener('click', function(e) {
      langContainer.classList.toggle('open');
      
      const isExpanded = langContainer.classList.contains('open');
      this.setAttribute('aria-expanded', isExpanded);
    });

    document.addEventListener('click', function(e) {
      if (!langContainer.contains(e.target) && langContainer.classList.contains('open')) {
        langContainer.classList.remove('open');
        langBtn.setAttribute('aria-expanded', 'false');
      }
    });

    updateStepUI();
  </script>

<script>
(function(){ "use strict";
  // Find a likely first-name input (robust across languages)
  function findFirstNameInput(){
    var candidates = [
      '#firstName','#firstname','#first_name','#given-name','#nombre','#name_first',
      'input[name="firstName"]','input[name="firstname"]','input[name="first_name"]',
      'input[name="given-name"]','input[name="nombre"]','input[name="name_first"]'
    ];
    for (var i=0;i<candidates.length;i++){
      var el = document.querySelector(candidates[i]);
      if (el) return el;
    }
    // heuristic: first text input under a "Vorname/First name/Nombre" label
    var labels = Array.from(document.querySelectorAll('label'));
    var hit = labels.find(l => /vorname|first\s*name|nombre/i.test(l.textContent||""));
    if (hit){
      var forId = hit.getAttribute('for');
      if (forId){
        var el2 = document.getElementById(forId);
        if (el2) return el2;
      }
      var next = hit.parentElement && hit.parentElement.querySelector('input[type="text"],input[type="search"],input[type="email"],input[type="tel"]');
      if (next) return next;
    }
    return null;
  }

  function firstToken(v){
    v = String(v||"").trim();
    if(!v) return "";
    v = v.split(/\s+/)[0];
    // letters + apostrophe + hyphen (unicode safe)
    v = v.replace(/[^\p{L}'\-]/gu, "");
    // TitleCase
    return v ? v[0].toUpperCase() + v.slice(1) : "";
  }

  function setHiddenFirstname(form, value){
    if(!form) return;
    var hidden = form.querySelector('input[name="firstname"]');
    if(!hidden){
      hidden = document.createElement('input');
      hidden.type = 'hidden';
      hidden.name = 'firstname';
      form.appendChild(hidden);
    }
    hidden.value = value || "";
  }

  function enhanceForm(form){
    var fn = findFirstNameInput();
    if(!form) return;
    // Live store to localStorage
    function persist(v){
      try { localStorage.setItem('firstName', firstToken(v)); } catch(e){}
    }
    if(fn){
      fn.addEventListener('input', function(){ persist(fn.value); });
      // initialize if already filled (autofill)
      if(fn.value) persist(fn.value);
    }
    // On submit: add ?firstname=... to action and set hidden field
    form.addEventListener('submit', function(){
      var name = "";
      try {
        name = fn ? firstToken(fn.value) : (localStorage.getItem('firstName')||"");
      } catch(e){}
      if(name){
        setHiddenFirstname(form, name);
        try{
          var a = form.getAttribute('action') || "";
          if(a){
            var base = a.split('?')[0];
            var qs = 'firstname=' + encodeURIComponent(name);
            form.setAttribute('action', base + '?' + qs);
          }
        }catch(e){}
      }
    }, true);
  }

  // Attach to the first <form> on the page
  document.addEventListener('DOMContentLoaded', function(){
    var form = document.querySelector('form');
    if(form) enhanceForm(form);
  });
})();
</script>

</body>
</html>